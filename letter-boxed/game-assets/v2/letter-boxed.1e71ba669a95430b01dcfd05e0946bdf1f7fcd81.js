!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("react"),require("react-dom"),require("react-redux"),require("foundation"),require("redux"),require("redux-thunk"),require("@tweenjs/tween.js"),require("fontfaceobserver"),require("responsive"),require("reselect"),require("prop-types"),require("classnames")):"function"==typeof define&&define.amd?define(["react","react-dom","react-redux","foundation","redux","redux-thunk","@tweenjs/tween.js","fontfaceobserver","responsive","reselect","prop-types","classnames"],t):t((e=e||self).React,e.ReactDOM,e.ReactRedux,e.Foundation,e.Redux,e.ReduxThunk,e.TWEEN,e.FontFaceObserver,e.Responsive,e.Reselect,e.PropTypes,e.classNames)}(this,function(s,i,e,l,n,r,c,a,u,t,o,f){"use strict";var d="default"in s?s.default:s;i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var p="default"in u?u.default:u;o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,f=f&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f;var m=s.createContext({getVariant:function(){return null},reportExposure:function(e){return null},tests:{}});function y(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function b(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?y(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){var t=e.children,r=e.regiId,n=(e=v(s.useState({}),2))[0],o=e[1];return s.useEffect(function(){var e,t,n=(null===(e=window.config)||void 0===e?void 0:e.AbraConfig)||{};l.abra.init(window.abra.config,{agent_id:(null===(e=window.config)||void 0===e||null===(t=e.userInfo)||void 0===t?void 0:t.agentID)||l.agentIdCookie,regi_id:r},n),o(b({},l.abra.getTests()))},[r]),e=s.useMemo(function(){return{tests:n,getVariant:function(e){return n[e]},reportExposure:function(e){return l.abra.reportExposure(e)}}},[n]),d.createElement(m.Provider,{value:e},t)}var w="LetterBoxed/ADD_LETTER",O="LetterBoxed/REMOVE_LETTER",S="LetterBoxed/ADD_WORD",E="LetterBoxed/ANIMATE_START",j="LetterBoxed/ANIMATE_END",P="LetterBoxed/COMPLETE_GAME",_="LetterBoxed/RESET_GAME",k="LetterBoxed/UNLOCK_GAME",x="LetterBoxed/LOCK_GAME",C="LetterBoxed/SHOW_ERROR_MESSAGE",z="LetterBoxed/SHOW_SUCCESS_MESSAGE",L="LetterBoxed/CLEAR_MESSAGE",N="NORTH",A="EAST",D="SOUTH",R="WEST";function T(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function M(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?B(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):B(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}var I={activeWord:"",activeLetter:"",submittedWords:[],animating:!1,isLocked:!1,isCompleted:!1,message:{},previousSuccess:!1},q=M({id:0,expiration:0,printDate:"",sides:["ADR","MEO","BXU","ITS"],dictionary:[],par:0,ourSolution:[],yesterdaysSides:[],yesterdaysSolution:[],editor:"",editorImage:""},I),$=["date"];function U(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function F(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?U(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):U(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function H(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}var G=n.combineReducers({puzzleContainer:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:q,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case w:return M(M({},e),{},{activeLetter:t.payload,activeWord:e.activeWord+t.payload});case O:var n=e.activeLetter,r=e.activeWord,o=e.submittedWords;return 1===e.activeWord.length&&0<e.submittedWords.length?(r=e.submittedWords.slice(-1).pop(),o=e.submittedWords.slice(0,-1)):(n=e.activeWord.slice(-2,-1),r=e.activeWord.slice(0,-1)),M(M({},e),{},{activeLetter:n,activeWord:r,submittedWords:o});case S:return M(M({},e),{},{activeWord:e.activeLetter,submittedWords:[].concat(T(e.submittedWords),[e.activeWord])});case E:return M(M({},e),{},{animating:!0});case j:return M(M({},e),{},{animating:!1});case _:return M(M({},e),I);case x:return M(M({},e),{},{isLocked:!0});case k:return M(M({},e),{},{isLocked:!1});case P:return M(M({},e),{},{isCompleted:!0});case C:return M(M({},e),{},{message:{isError:!0,value:t.payload}});case z:return M(M({},e),{},{message:{isError:!1,value:t.payload},previousSuccess:!e.previousSuccess});case L:return M(M({},e),{},{message:{}});default:return e}}});function X(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Y(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?X(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):X(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function V(e){function r(){}function o(e,t){return e.classList.add(t),e}function t(e,t){return e.classList.remove(t),e}var n,i,a,c,l="pzm",u="".concat(l,"-system"),s="".concat(l,"-modals-wrapper"),f="".concat(l,"-submodal"),d="".concat(l,"-modal"),p="".concat(d,"-content"),m="".concat(d,"-ex"),y="".concat(l,"-active"),b=Y({root:document.body,onOpen:r,onClose:r,modals:[]},e),v={},h=o(b.root,u),g=o(document.createElement("div"),f),w=o(document.createElement("div"),s);function O(e){e.target===w&&C.close()}function S(e){"Escape"===e.key&&(e.preventDefault(),C.close())}function E(e){if(!v[e])throw new Error("unknown modal ".concat(e,"\n\nchoose one of\n\t").concat(Object.keys(v).join("\n\t"),"\n"));return v[e]}function j(e,t,n){var r=x(t),n=n&&x(n);b[e]&&b[e](r,n),t[e]&&t[e](r,n)}function P(e){var t;if(!e.name||v[e.name])throw new Error("modals need a unique name");var n=Y(Y({meta:{},create:r,id:"".concat(l,"-").concat(e.name),className:"",onOpen:r,onClose:r,closeByEx:!0,closeByBgClick:!0,viewTime:0,viewCount:0,subModalContent:void 0},e),{},{root:o(document.createElement("div"),p),wrap:o(document.createElement("div"),d)});n.wrap.setAttribute("id",n.id),n.closeByEx&&(n.ex=o(document.createElement("div"),m),n.ex.innerHTML="×",n.ex.setAttribute("role","button"),n.ex.setAttribute("tabindex","0"),n.ex.addEventListener("click",C.close),n.ex.addEventListener("keydown",function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||(e.preventDefault(),e.stopPropagation(),C.close())}),n.wrap.appendChild(n.ex)),null!==(t=n.subModalContent)&&void 0!==t&&t.name&&(n.subRoot=o(document.createElement("div"),"".concat(l,"-submodal-content-").concat(e.name)),g.appendChild(n.subRoot),o(n.wrap,"".concat(l,"-with-").concat(n.subModalContent.name))),n.wrap.appendChild(n.root),n.className&&o(n.wrap,n.className),w.appendChild(n.wrap),Object.assign(n,n.create(x(n),C)),v[n.name]=n}function _(e,t){e!==(n&&n.name)&&(e=E(e),i=t,e.viewCount+=1,c=Date.now(),o(e.wrap,y),e.subRoot&&o(e.subRoot,y),w.focus(),e.closeByBgClick&&w.addEventListener("click",O),(e.closeByBgClick||e.closeByEx)&&document.body.addEventListener("keydown",S),j("onOpen",e,n),n=e)}function k(e){n&&(a="string"==typeof e?e:void 0,n.viewTime+=Date.now()-c,t(n.wrap,y),n.subRoot&&t(n.subRoot,y),n.closeByBgClick&&w.removeEventListener("click",O),(n.closeByBgClick||n.closeByEx)&&document.body.removeEventListener("keydown",S),e=n,n=void 0,j("onClose",e))}w.setAttribute("tabindex","0");var x=function(e){return{root:e.root,subRoot:e.subRoot,name:e.name,meta:e.meta,viewTime:e.viewTime,viewCount:e.viewCount,openTrigger:i,closeTrigger:a}},C={add:function(e){P(e)},get:function(e){return x(E(e))},getAll:function(){var t=this;return Object.keys(v).map(function(e){return t.get(e)})},open:function(e,t){n?k():o(h,y),_(e,t)},close:function(){t(h,y),k()},getContent:function(){return w},setScrimColor:function(e){w.style.background=e}};return h.appendChild(w),b.modals.forEach(P),w.appendChild(g),C}function J(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function K(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?J(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):J(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}var Z={root:document.getElementById("portal-game-modals"),modals:[],onOpen:function(){},onClose:function(){}},Q=["modalSystem"];function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function ne(e){var n=e.modalSystem,r=te(e,Q);return n.getAll().map(function(e){var t=e.name,e=e.meta.Content;return i.createPortal(d.createElement(e,ee({open:function(){return n.open(t)},close:n.close},r,{modalSystem:n})),n.get(t).root)})}var re=function(t){return new Promise(function(e){setTimeout(e,t)})};function oe(t,e,n){e=e<t,n=n.find(function(e){return e.minWidth<=t});return p.isMobile&&!e&&n.mobile||n.desktop}var ie=function(e){return e.puzzleContainer},ae=t.createSelector(ie,function(e){var r=e.activeWord,o=e.activeLetter,i=e.submittedWords,e=e.sides,a=[];return e.map(function(e,n){return e.split("").map(function(t){return a.push({letter:t,isActiveLetter:o===t,isInActiveWord:!!r.includes(t),isUsed:i.some(function(e){return e.includes(t)}),side:function(e){switch(e){case 0:return N;case 1:return A;case 2:return D;case 3:return R;default:throw new Error("Unknown side number: ".concat(e))}}(n)}),""})}),a});function ce(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ue(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function se(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):ue(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function fe(e){var t=e.isLocked;return e.animating||t}var de=function(e){return/[A-Z]{1}/.test(e)&&1===e.length},pe=function(e,t){return!!e.find(function(e){return e.letter===t})},me=function(e,t,n){var r=e.find(function(e){return e.letter===t}),e=e.find(function(e){return e.letter===n});return r&&e&&r.side===e.side},ye=function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},be={black:"#000",white:"#FFF",pink:"#F9B5AB",palePink:"#FEF0ED"},ve={letter:"letter",point:"point"},he={isActive:"isActive",isSubmitted:"isSubmitted",isAnimating:"isAnimating"},ge={active:"active",inactive:"inactive",animating:"animating"},we=.65,Oe={letterWidth:26,letterHeight:32,letterPadding:8,pointSize:17,pointPadding:8},Se=[{minWidth:768,desktop:{canvasSize:400,dotRadius:8,fontSize:32,lineWidth:4},mobile:{canvasSize:500,dotRadius:9,fontSize:38,lineWidth:4.5}},{minWidth:444,desktop:{canvasSize:400,dotRadius:8,fontSize:32,lineWidth:4}},{minWidth:321,desktop:{canvasSize:320,dotRadius:7.15,fontSize:28,lineWidth:4}},{minWidth:0,desktop:{canvasSize:225,dotRadius:6,fontSize:22,lineWidth:4}}],Ee=[{minWidth:768,desktop:{fontSize:34},mobile:{fontSize:36}},{minWidth:444,desktop:{fontSize:28},mobile:{fontSize:28}},{minWidth:321,desktop:{fontSize:28},mobile:{fontSize:28}},{minWidth:0,desktop:{fontSize:28},mobile:{fontSize:24}}];function je(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Pe(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?je(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):je(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function _e(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(){var e,t,n,r,o,i,a,c,l,u,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ve.letter,f=1<arguments.length?arguments[1]:void 0,d=2<arguments.length?arguments[2]:void 0,p=f.startingX,m=f.startingY,y=f.squareSize,b=f.padding,v=d.fontSize,f=d.dotRadius,d=(y-y*(3<arguments.length&&void 0!==arguments[3]?arguments[3]:1))/2;return s===ve.point?(e=p+b+d,t=p+y/2,n=p+y-b-d,r=m+b+d,o=m+y/2,i=m+y-b-d,a=m+d,c=m+y-d,l=p+d,u=p+y-d):s===ve.letter&&(t=(e=p+b)+y/2-b,n=p+y-b,r=m+b+v/3,o=m+y/2+v/3,i=m+y-b+v/3,a=m-f-b/4,c=m+y+v+f+b/12,l=p-v/2-b/2.5,u=p+y+v/2+b/2.5),[].concat([{x:e,y:a},{x:t,y:a},{x:n,y:a}],[{x:u,y:r},{x:u,y:o},{x:u,y:i}],[{x:e,y:c},{x:t,y:c},{x:n,y:c}],[{x:l,y:r},{x:l,y:o},{x:l,y:i}])}function Ce(e,t){return e.x===t.x&&e.y===t.y}function ze(e,t){return(Ce(e.from,t.from)||Ce(e.from,t.to))&&(Ce(e.to,t.from)||Ce(e.to,t.to))}function Le(t,e){var n=0;return e.forEach(function(e){ze(e,t)&&(n+=1)}),n}function Ne(e,t){return Ie(Me(e,t))}function Ae(e,t){for(var n=Oe.letterWidth,r=Oe.letterHeight,o=Oe.letterPadding,i={x:n/2+o,y:r+o},a=Oe.pointSize/2+Oe.pointPadding,c=0;c<t.length;c+=1){var l=t[c],u=l.letterCoords,l=l.pointCoords;if(qe(u,e,i)||$e(l,e,a))return t[c]}return null}function De(e,t){var n=e;return t===ge.active?n=Pe(Pe({},e),{},{isActiveLetter:!0,isInActiveWord:!0}):t===ge.inactive?n=Pe(Pe({},e),{},{isActiveLetter:!1,isInActiveWord:!0}):t===ge.animating&&(n=Pe(Pe({},e),{},{isActiveLetter:!1,isInActiveWord:!1,isUsed:!1,isAnimating:!0})),n}function Re(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:we;return{startingX:e*((1-t)/2),startingY:e*((1-t)/2),squareSize:e*t,padding:e/10}}function Te(e){return[e/30,e/38]}var We=function(e,o){var i=e.split(""),a=[];if(i.length<2)return null;for(var t=1;t<i.length;t+=1)!function(e){var t=i[e-1],n=i[e],r=o.find(function(e){return e.letter===t}).pointCoords,e=o.find(function(e){return e.letter===n}).pointCoords;a.push({from:r,to:e})}(t);return a},Be=function(e,o){var i=e.split(""),a=[];if(i.length<2)return null;for(var t=1;t<i.length;t+=1)!function(e){var t=i[e-1],n=i[e],r={from:o.find(function(e){return e.letter===t}).pointCoords,to:o.find(function(e){return e.letter===n}).pointCoords};a.forEach(function(e){ze(e,r)&&(r.from=e.from,r.to=e.to)}),a.push(r)}(t);return a},Me=function(e,n){return _e(e).reduce(function(e,t){return[].concat(_e(e),_e(We(t,n)))},[])},Ie=function(n){return n&&n.map(function(e,t){return e.repeated=Le(e,n.slice(0,t)),e.repeatCount=Le(e,n),e})},qe=function(e,t,n){return Math.abs(e.x-t.x)<n.x&&e.y-t.y<n.y&&0<e.y-t.y},$e=function(e,t,n){return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n},Ue=function(e,t){var n=parseInt(e.slice(1),16),r=t<0?0:255,o=t<0?-1*t:t,e=n>>16,t=n>>8&255,n=255&n;return"#".concat((16777216+65536*(Math.round((r-e)*o)+e)+256*(Math.round((r-t)*o)+t)+(Math.round((r-n)*o)+n)).toString(16).slice(1))};function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var He=["letterCoords"],Ge=["pointCoords"];function Xe(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function Ye(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(n),!0).forEach(function(e){tt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=et(n);return function(e,t){{if(t&&("object"===Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return Qe(e)}(this,r?(e=et(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nt,rt,ot,it,at=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(o,d.Component);var e,t,n,r=Ze(o);function o(e){var m;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),tt(Qe(m=r.call(this,e)),"getCtx",function(){return m.canvas.current.getContext("2d")}),tt(Qe(m),"getAdjustedMousePosition",function(e){var t=m.canvas.current.getBoundingClientRect(),e=e.clientX?e:e.changedTouches[0];return{x:e.clientX-t.left,y:e.clientY-t.top}}),tt(Qe(m),"setScale",function(e){var t=m.getCtx();t.save(),t.scale(window.devicePixelRatio,window.devicePixelRatio),e(),t.restore()}),tt(Qe(m),"animate",function(e){window.requestAnimationFrame(m.animate),c.update(e)}),tt(Qe(m),"animateLines",function(){var e,t=m.props.puzzle,n=(e=t.activeWord,t=m.letters,Ie(We(e,t)));n.forEach(function(e,t){return m.animateLineDraw(e,t===n.length-1)});for(var r=1;r<m.tweens.length;r+=1)m.tweens[r-1].chain(m.tweens[r]);m.tweens[0].start()}),tt(Qe(m),"animateLineDraw",function(t,e){var n=t.from,r=t.to,o=m.letters.find(function(e){e=e.pointCoords;return e.x===n.x&&e.y===n.y}),i=m.letters.find(function(e){e=e.pointCoords;return e.x===r.x&&e.y===r.y}),a=new c.Tween(Ve({},o.pointCoords)).to(Ve({},i.pointCoords),350).onUpdate(function(e){m.drawOnAnimationUpdate(t,o,i,e)}).interpolation(c.Interpolation.Linear).easing(c.Easing.Exponential.InOut).onComplete(function(){return m.drawOnAnimationComplete(o,i,e)});m.tweens.push(a)}),tt(Qe(m),"calculateCoordinates",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=m.state.canvasSize,n=xe(ve.letter,Re(t),m.state),e=xe(ve.point,Re(t),m.state,e);m.updateLetterState(ve.letter,n),m.updateLetterState(ve.point,e)}),tt(Qe(m),"drawSquare",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=m.state.canvasSize,n=Re(t),r=n.startingX,o=n.startingY,i=n.squareSize,t=(i-i*e)/2,n=m.getCtx();n.fillStyle=be.white,n.fillRect(r+t,o+t,i*e,i*e)}),tt(Qe(m),"drawSquareOutline",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=m.state,n=t.canvasSize,r=t.lineWidth,o=Re(n),i=o.startingX,a=o.startingY,t=o.squareSize,n=(t-t*e)/2,o=m.getCtx();o.strokeStyle=be.black,o.lineWidth=r-1,o.strokeRect(i+n,a+n,t*e,t*e)}),tt(Qe(m),"drawLetter",function(e,t){var n,r,o,i=m.state.fontSize,o=(n=(a=e).isActiveLetter,r=a.isInActiveWord,o=a.isUsed,a={strokeStyle:be.white,fillStyle:be.white,fontWeight:600},n&&r||r?a={strokeStyle:be.black,fillStyle:be.black,fontWeight:600}:o&&(a={strokeStyle:be.black,fillStyle:be.black,fontWeight:500}),a),a=m.getCtx();a.textAlign="center",a.font="".concat(o.fontWeight," ").concat(i,"px nyt-franklin"),a.strokeStyle=o.strokeStyle,a.fillStyle=o.fillStyle,a.fillText(e.letter,t.x,t.y)}),tt(Qe(m),"drawLetters",function(){m.letters.forEach(function(e){var t=e.letterCoords,e=Xe(e,He);return m.drawLetter(e,t)})}),tt(Qe(m),"drawPoint",function(e,t){var n,r,o=m.state,i=o.dotRadius,a=o.lineWidth,e=(n=(c=e).isActiveLetter,r=e.isInActiveWord,o=e.isUsed,e=e.isAnimating,c={strokeStyle:be.black,fillStyle:be.white},n&&r?c={strokeStyle:be.pink,fillStyle:be.black}:r?c={strokeStyle:be.pink,fillStyle:be.white}:o?c={strokeStyle:be.black,fillStyle:be.pink}:e&&(c={strokeStyle:be.white,fillStyle:be.pink}),c),c=m.getCtx();c.lineWidth=a-1,c.strokeStyle=e.strokeStyle,c.fillStyle=e.fillStyle,c.beginPath(),c.arc(t.x,t.y,i,0,2*Math.PI,!1),c.fill(),c.stroke()}),tt(Qe(m),"drawPoints",function(){m.letters.forEach(function(e){var t=e.pointCoords,e=Xe(e,Ge);return m.drawPoint(e,t)})}),tt(Qe(m),"drawLine",function(e){var t,n=e.from,r=e.to,o=e.repeated,i=void 0===o?0:o,a=e.repeatCount,c=void 0===a?0:a,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:he.isActive,u=m.state,s=u.canvasSize,f=u.lineWidth,d=he.isActive,p=he.isAnimating,u=(t=l,o=i,e=he.isAnimating,a=he.isSubmitted,u=be.pink,t===e&&0<o?u=Ue(be.pink,-o/15):t===a&&(u=be.palePink),u),s=l===d?Te(s):[],f=l===p?f+c:f+i,i=m.getCtx();i.save(),i.strokeStyle=u,i.fillStyle=u,i.lineWidth=f,i.setLineDash(s),i.beginPath(),i.moveTo(n.x,n.y),i.lineTo(r.x,r.y),i.globalCompositeOperation="source-atop",i.stroke(),i.restore()}),tt(Qe(m),"drawLines",function(){var e,t=m.props.puzzle,n=m.state.currentLine,r=Ne(t.submittedWords,m.letters),t=(e=t.activeWord,t=m.letters,Ie(Be(e,t)));r&&r.map(function(e){return m.drawLine(e,he.isSubmitted)}),t&&t.map(function(e){return m.drawLine(e)}),n&&m.drawLine(n)}),tt(Qe(m),"drawPuzzle",function(){m.calculateCoordinates(),m.setScale(function(){m.drawSquare(),m.drawLines(),m.drawSquareOutline(),m.drawPoints(),m.drawLetters()})}),tt(Qe(m),"clearPuzzle",function(){m.getCtx().clearRect(0,0,m.canvas.current.width,m.canvas.current.height)}),tt(Qe(m),"clearSquare",function(){var e=m.state,t=e.canvasSize,n=e.dotRadius,r=e.lineWidth,o=Re(t),e=o.startingX,t=o.startingY,o=o.squareSize,r=n+r;m.getCtx().clearRect(e-r,t-r,o+2*r,o+2*r)}),tt(Qe(m),"updateLetterState",function(n,r){var e=m.letters.map(function(e,t){return Ve(Ve({},e),{},tt({},"".concat(n,"Coords"),r[t]))});m.letters=e}),tt(Qe(m),"squish",function(){var e=m.props,o=e.puzzle,i=e.actions,t=function(e){var t=e.scale,e=m.getCtx();e.save(),m.calculateCoordinates(t),e.scale(window.devicePixelRatio,window.devicePixelRatio),m.clearSquare(),m.drawSquare(t),m.drawLines(t),m.drawSquareOutline(t),m.drawPoints(),e.restore()},n={scale:1},e=new c.Tween(n).to({scale:.85},100).onUpdate(t),t=new c.Tween(n).to({scale:1},100).onUpdate(t);e.chain(t).start(),re(100).then(function(){var e,t,n,r;i.showMessage((t=(e=o).previousSuccess,n=o.submittedWords,r=void 0===n?[]:n,n=o.isCompleted,e=o.activeWord,(r.length?r[r.length-1]:e).length<7?t?"Nice!":"Awesome!":n?"Savant!":"Genius!"),!1)}),re(800).then(i.clearErrorMessage)}),tt(Qe(m),"interactionDown",function(e){var t,n;e.touches&&1<e.touches.length||(e.preventDefault(),n=(t=m.props).puzzle,t=t.actions,n.animating||(e=m.getAdjustedMousePosition(e),e=Ae(e,m.letters),n=n.activeLetter,!e||""!==n&&e.letter!==n||(""===n&&t.addLetter(e.letter),m.startingPos=e.pointCoords)))}),tt(Qe(m),"interactionMove",function(e){var t,n,r,o,i,a,c;e.touches&&1<e.touches.length||(e.preventDefault(),a=(i=m.props).puzzle,t=i.actions,c=m.state.canvasSize,a.animating||(n=m.getAdjustedMousePosition(e),r=Ae(n,m.letters),o=a.activeLetter,m.startingPos&&(i=n,e=Re(c),a=e.startingX,c=e.startingY,e=e.squareSize,i.x>=a&&i.x<=a+e&&i.y>=c&&i.y<=c+e)&&(m.setState({currentLine:{from:m.startingPos,to:n}}),r&&r.letter!==o&&!me(m.letters,r.letter,o)&&(t.addLetter(r.letter),m.startingPos=r.pointCoords))))}),tt(Qe(m),"interactionUp",function(e){var t,n;e.touches&&1<e.touches.length||(e.preventDefault(),n=(t=m.props).puzzle,t=t.actions,n.animating||(e=m.getAdjustedMousePosition(e),e=Ae(e,m.letters),n=n.activeLetter,m.setState({currentLine:null}),e&&e.letter!==n&&(t.addLetter(e.letter),m.startingPos=null)))}),tt(Qe(m),"addEventListeners",function(){var t=!1;m.canvas.current.addEventListener("mousedown",function(e){e.preventDefault(),t=!0,m.interactionDown(e)}),m.canvas.current.addEventListener("mousemove",function(e){e.preventDefault(),t&&m.interactionMove(e)}),m.canvas.current.addEventListener("mouseup",function(e){e.preventDefault(),t=!1,m.interactionUp(e)}),m.canvas.current.addEventListener("touchstart",function(e){m.interactionDown(e)}),m.canvas.current.addEventListener("touchmove",function(e){m.interactionMove(e)}),m.canvas.current.addEventListener("touchend",function(e){m.interactionUp(e)})}),tt(Qe(m),"drawOnAnimationUpdate",function(e,t,n,r){var o=m.props.puzzle,i=m.letters.find(function(e){e=e.letter;return o.activeLetter===e}),a={from:t.pointCoords,to:r,repeated:e.repeated,repeatCount:e.repeatCount};m.setScale(function(){m.drawLine(a,he.isAnimating),m.drawPoint(De(i,ge.inactive),i.pointCoords),m.drawPoint(De(t,ge.active),t.pointCoords),m.drawPoint(De(n,ge.inactive),n.pointCoords)})}),tt(Qe(m),"drawOnAnimationComplete",function(e,t,n){var r=m.props.actions;m.setScale(function(){m.drawPoint(De(e,ge.animating),e.pointCoords),m.drawPoint(De(t,ge.active),t.pointCoords)}),n&&(r.addWord(),m.tweens=[])}),m.tweens=[],m.startingPos=null,m.canvas=d.createRef(),m.letters=e.puzzle.letters,m.state=Ve(Ve({},oe(window.innerWidth,window.innerHeight,Se)),{},{currentLine:null}),window.addEventListener("resize",function(){var e,t,n;document.body.clientWidth>window.innerWidth||(e=m.props.actions,t=oe(window.innerWidth,window.innerHeight,Se),n=m.state,t.canvasSize!==n.canvasSize&&(e.endAnimation(),m.setState(t)))}),m}return e=o,(t=[{key:"componentDidMount",value:function(){var e=this;new a("nyt-franklin").load().then(function(){e.drawPuzzle(),e.addEventListeners()}),window.requestAnimationFrame(this.animate)}},{key:"shouldComponentUpdate",value:function(){return!this.props.puzzle.animating}},{key:"componentDidUpdate",value:function(e){var t=this.props.puzzle;t.letters!==e.puzzle.letters&&(this.letters=t.letters,this.startingPos=null),this.clearPuzzle(),this.drawPuzzle(),t.animating&&!e.puzzle.animating&&(this.squish(),re(230).then(this.animateLines))}},{key:"render",value:function(){var e=this.state.canvasSize;return d.createElement("canvas",{ref:this.canvas,width:e*window.devicePixelRatio,height:e*window.devicePixelRatio,style:{width:e,height:e}})}}])&&Je(e.prototype,t),n&&Je(e,n),o}(),ct=["modal","gameplay","settings","general"],lt=["tech","gameplay","settings"],ut=(nt="LB",rt=l.getGameData().id,ot="".concat(nt,"-").concat(rt),it={interaction:{custom:function(e,t){var n=e.module,r=n.name,e=n.element,n=e.name,e=e.label;st("moduleInteraction",void 0===r?"gameplay":r,n,void 0===e?"":e,"",t)}},impression:{custom:function(e){var t=e.module,n=t.name,e=t.region,t=t.label;st("impression",void 0===n?"gameplay":n,e,void 0===t?"":t)}}},ct.forEach(function(n){it.interaction[n]=function(e,t){return st("moduleInteraction",n,e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)}}),lt.forEach(function(n){it.impression[n]=function(e,t){return st("impression",n,e,t)}}),it);function st(e,t,n,r,o,i){l.track(e,"moduleInteraction"===e?{module:{name:t,context:ot,label:o,element:{name:n||"",label:"string"==typeof r?r:JSON.stringify(r)}},eventData:{pageType:"game",type:i?"ob_click":"click",trigger:"module",status:""}}:{module:{name:t,context:ot,region:n||"",label:"string"==typeof r?r:JSON.stringify(r)}})}function ft(e){if(void 0===mt.localStorage)return!1;var t=mt.localStorage.getItem(yt);if(t)try{if(e===JSON.parse(t).printDate)return!0;bt()}catch(e){bt(),console.error("could not parse local progress: ".concat(t))}return!1}function dt(e){return!vt(e)}function pt(e){var t=e.modals,n=e.actions,r=e.animating,o=e.printDate;return i.createPortal(d.createElement(d.Fragment,null,d.createElement("span",{className:"pz-toolbar-left"},d.createElement("span",{role:"button",className:"pz-toolbar-button lb-toolbar-button__help",onClick:function(){!r&&dt(o)&&(ut.interaction.settings("how-to-play"),t.open("help","toolbar"))},"data-full":"Help","data-short":"Help"}),d.createElement("span",{role:"button",className:"pz-toolbar-button lb-toolbar-button__restart",onClick:function(){dt(o)&&(ut.interaction.gameplay("reset-game",n.puzzle.par),n.resetGame())},"data-full":"Restart","data-short":"Restart"})),d.createElement("span",{className:"pz-toolbar-right"},!u.isMobile&&d.createElement("span",{role:"button",className:"pz-toolbar-button lb-toolbar-button__soln",onClick:function(){r||(ut.interaction.settings("yesterday-solution"),t.open("yesterday","toolbar"))},"data-full":"Yesterday’s Answers","data-short":""}))),ht)}var mt="undefined"==typeof window?{}:window,yt="letterboxed-today",bt=function(){mt.localStorage.removeItem(yt)},vt=function(e){return!l.userType.hasXwd&&ft(e)},ht=document.getElementById("".concat(u.isMobile?"js-mobile":"portal-game","-toolbar"));function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Et(n);return function(e,t){{if(t&&("object"===gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=Et(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}pt.defaultProps={actions:{puzzle:{},resetGame:function(){}}};var jt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(o,d.Component);var e,t,n,r=St(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e)).firstUseLetters=[],e}return e=o,(t=[{key:"render",value:function(){var n=this,e=this.props,t=e.word,r=e.usedLetters,o=e.addUsedLetter;return d.createElement("span",{className:"lb-word-list__word"},t.split("").map(function(e,t){t=d.createElement("span",{key:t,className:"opaque"},e);return r.includes(e)?n.firstUseLetters.includes(e)?t:e:(o(e),n.firstUseLetters.push(e),t)}))}}])&&wt(e.prototype,t),n&&wt(e,n),o}();function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=zt(n);return function(e,t){{if(t&&("object"===Pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return Ct(e)}(this,r?(e=zt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(o,d.Component);var e,t,n,r=xt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Lt(Ct(t=r.call(this,e)),"componentDidUpdate",function(){t.usedLetters=[]}),Lt(Ct(t),"addUsedLetter",function(e){t.usedLetters.push(e)}),t.usedLetters=[],t}return e=o,(t=[{key:"render",value:function(){var n=this,e=this.props.puzzle.submittedWords;return d.createElement("div",{className:"lb-word-list-container"},d.createElement("div",{className:"lb-word-list-length"},e.length," ",1<e.length?"words":"word"),d.createElement("div",{className:"lb-word-list"},e.map(function(e,t){return d.createElement(jt,{key:t,word:e,usedLetters:n.usedLetters,addUsedLetter:n.addUsedLetter})})))}}])&&_t(e.prototype,t),n&&_t(e,n),o}();function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Bt(n);return function(e,t){{if(t&&("object"===At(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return Wt(e)}(this,r?(e=Bt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Nt.defaultProps={puzzle:o.shape({})};function It(){document.getElementsByClassName("lb-text-field")[0].scrollLeft+=9999}function qt(e){return e=e.message,d.createElement("div",{className:f("lb-message-box",{"error-message":e&&e.isError,"success-message":e&&!1===e.isError})},e.value&&d.createElement("span",{className:"lb-message"},e.value))}function $t(e){var t;return 2*e<1?(t=2*e,.5*Math.pow(t,3)):(t=e-2,.5*Math.pow(t,3)+2)}function Ut(){return Date.now()}var Ft=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(o,d.Component);var e,t,n,r=Tt(o);function o(e){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Mt(Wt(i=r.call(this,e)),"getFontSize",function(e){var t=Wt(i),n=t.fontBreak,r=t.fontSize,o=t.fontBreakMaxLength,t=p.isMobile;if(e<n)return r;t=t?.5:1;return r-(Math.min(e,o)-n)*t}),Mt(Wt(i),"getLineHeightSize",function(e){var t=Wt(i),n=t.fontBreak,t=t.fontBreakMaxLength;return(p.isMobile?34:38)+Math.max((Math.min(e,t)-n)/4,0)}),i.fontBreak=15,i.fontBreakMaxLength=21,i.scrollableBreak=20,i.fontSize=oe(window.innerWidth,window.innerHeight,Ee).fontSize,i}return e=o,(t=[{key:"componentDidMount",value:function(){var e=this.props.action;It(),window.addEventListener("keydown",function(){e.apply(void 0,arguments),It()},!1)}},{key:"componentWillUnmount",value:function(){var e=this.props.action;window.removeEventListener("keydown",e)}},{key:"render",value:function(){var e=this.props.value;return d.createElement("div",{className:"lb-text-field-wrapper"},d.createElement("div",{className:"lb-text-field-container"},d.createElement("div",{className:f("lb-text-field",{"not-empty":!!e.length,scrollable:e.length>this.scrollableBreak}),style:{fontSize:"".concat(this.getFontSize(e.length),"px"),lineHeight:"".concat(this.getLineHeightSize(e.length),"px")}},e.split("").map(function(e,t){return d.createElement("span",{key:"".concat(e,"-").concat(t)},e)}),d.createElement("span",{className:"lb-text-field__caret"}," "))),d.createElement("hr",{className:"lb-text-field-underline"}))}}])&&Dt(e.prototype,t),n&&Dt(e,n),o}(),Ht="top",Gt="position",Xt="overflow",Yt="visibility",Vt="minHeight",Jt="backgroundColor",Kt="hidden",Zt="static",Qt="visible",en="relative",tn="absolute",nn="on-stage",rn="fly-in",on="fly-out",an="slide-up",cn="modal-card",ln="sequence-animation",un=400,sn=function(e,t,n){e.style[t]=n},fn=function(e,t){e.classList.add(t)},dn=function(e,t){e.length?e.forEach(function(e){e.classList.remove(t)}):e.classList.remove(t)},pn=function(i,a,c,l,u){var s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:$t,f=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"px";return new Promise(function(n){var r=l-c,o=Ut();(function e(){var t=1<=(t=(Ut()-o)/u)?1:t;i.style[a]=Math.min(c+s(t)*r+f,l),1===t?n():window.requestAnimationFrame(e)})()})},mn=function(e,t){var n=0;e.forEach(function(e){e&&(n+=t,sn(e,"transitionDelay","".concat(n,"ms")),fn(e,an))})};function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bn(){return(bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gn(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=On(n);return function(e,t){{if(t&&("object"===yn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return wn(e)}(this,r?(e=On(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function On(e){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e){return function(e){if(Array.isArray(e))return En(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return En(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?En(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jn={$black:"#000",$white:"#fff",$blue1:"#083aaa",$blue2:"#2860d8",$blue3:"#4f85e5",$blue35:"#5aa0d5",$blue4:"#a7d8ff",$blue5:"#dcefff",$blue7:"#477aaa",$purple1:"#5960ec","$error-red":"#ce2424",$gray1:"#333",$gray2:"#959595",$gray3:"#ccc",$gray4:"#dcdcdc",$gray5:"#e6e6e6",$gray6:"#f4f4f4",$gray7:"#fafafa",$gray8:"#c4c4c4",$gray9:"#c2c2c2",$gray10:"#d9d9d9",$gray11:"#eee",$blueGray1:"#787886",$gold1:"#c4a200",$gold2:"#e2c32f",$yellow1:"#ffda00",$green1:"#6dc3a1",$statsPink:"#f93aa7",$statsYellow:"#ffc600","$spelling-bee-yellow":"#f8cd05","$letter-boxed-pink":"#faa6a4","$vertex-tan":"#f7f5f6",$bannerBlue:"#4d88f9","$daily-crossword-blue":"#6493e6","$mini-crossword-blue":"#95befa","$spelling-bee-gold":"#f7da21","$tiles-green":"#b5e352","$letter-boxed-red":"#e05c56","$vertex-turquoise":"#00a2b3","$sudoku-orange":"#fb9b00"};function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kn=function(e){var t=e.momentSystem,n=e.transitionTo,r=e.barBgColor,o=void 0===r?"rgba(0, 0, 0, 0.2)":r,r=e.barColor,r=void 0===r?"#FFF":r,e=e.hasLoaded,i=void 0!==e&&e,e=Pn(s.useState(10),2),a=e[0],c=e[1],e=Pn(s.useState(null),2),l=e[0],u=e[1];return s.useEffect(function(){var e;i?(clearTimeout(l),t.transition("loading",n)):a<=100&&(e=setTimeout(function(){c(a+20*Math.random())},30+150*Math.random()),u(e))},[a,i]),d.createElement("div",{className:"pz-loader",id:"pz-loading-bar",style:{background:o}},d.createElement("div",{className:"pz-loader__fill",style:{background:r,right:"".concat(Math.max(100-a,0),"%")}}))};function xn(){return(xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Cn(e){return d.createElement("button",xn({type:"button",className:"pz-hybrid-back"},e),d.createElement("span",{className:"pz-hybrid-back__text"},"Back"))}var zn=function(){return window.isHybridWebView&&window.NativeBridge?d.createElement(Cn,{onClick:window.NativeBridge.gamesBackToHub}):null},Ln=function(e){var t=e.icon,e=e.size;return d.createElement("div",{className:f("pz-moment__icon",void 0===e?"large":e,t)})},Nn=function(e){var t=e.text,e=e.size;return d.createElement("h1",{className:f("pz-moment__title",void 0===e?"large":e)},t)},An=function(e){var t=e.text,e=e.variant;return d.createElement("h1",{className:f("pz-moment__description",void 0===e?"default":e),dangerouslySetInnerHTML:{__html:t}})},Dn=function(e){e=e.plays,e=void 0===e?"":e;return e&&d.createElement("p",{className:f("pz-moment__plays"),dangerouslySetInnerHTML:{__html:e}})},Rn=function(e){e=e.children;return d.createElement("div",{className:"pz-moment__body"},e)},Tn=function(e){var t=e.action,n=e.text,r=e.color,o=e.variant,e=e.icon;return d.createElement("button",{type:"button",className:f("pz-moment__button",void 0===r?"primary":r,o),onClick:t},n,"locked"===e&&d.createElement("div",{className:"pz-moment__button--padlock"}))},Wn=function(e){e=e.date;return d.createElement("span",{className:"pz-moment__info-date"},e)},Bn=function(e){e=e.editor;return e?d.createElement("span",{className:"pz-moment__info-editor"},"Edited by ".concat(e)):null},Mn=function(e){e=e.children;return d.createElement("span",{className:"pz-moment__info-text"},e)},In=function(e){var t=e.bgColor,e=e.children;return d.createElement("div",{className:"pz-moment",style:{backgroundColor:jn[void 0===t?"$gray3":t]}},e)},qn=function(e){return"oxford"===e.promo&&d.createElement("p",null,d.createElement("a",{href:"https://www.oxforddictionaries.com",target:"_blank",rel:"noopener noreferrer",className:"pz-moment__promo"}))},$n=["icon","title","bgColor","description","isActive"];function Un(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function Fn(e){var t=e.icon,n=e.title,r=void 0===(i=e.bgColor)?"$gray3":i,o=e.description,i=e.isActive,e=Un(e,$n);return d.useEffect(function(){document.getElementById("js-hook-pz-moment__loading").style["background-color"]=jn[r]},[]),d.createElement("div",{className:"pz-loader-container"},d.createElement(zn,null),d.createElement(Ln,{icon:t,size:"large"}),d.createElement(Nn,{text:n,size:"large"}),d.createElement(An,{text:o}),i&&d.createElement(kn,e))}var Hn=["hasLoaded"];function Gn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Xn(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Gn(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):Gn(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function Yn(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),i=0;i<o.length;i++)n=o[i],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function Vn(){return(Vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Jn(e){return e=e.game,d.createElement(In,{bgColor:e.bgColor},d.createElement("div",{className:"pz-moment__container alternate"},d.createElement(zn,null),d.createElement("div",{className:"pz-moment__content sequence-animation"},d.createElement(Ln,{icon:e.icon,size:"large"}),d.createElement(Nn,{text:e.title,size:"large"}),d.createElement(An,e.description),d.createElement(Dn,e.meta),d.createElement("div",{className:"pz-moment__button-wrapper"},(e.buttons||[]).map(function(e,t){return d.createElement(Tn,Vn({},e,{key:t}))}),e.bodyText&&d.createElement(Rn,null,e.bodyText)),d.createElement("p",{className:"pz-moment__info"},d.createElement(Wn,{date:e.date}),d.createElement(Bn,{editor:e.editor}),e.infoText&&d.createElement(Mn,null,e.infoText)),d.createElement(qn,{promo:e.promo}))))}function Kn(e){return e=or(e),window.isHybridWebView&&window.NativeBridge?window.NativeBridge.gamesAuthenticateUser("subscribe").then(function(e){if(!e.success)throw new Error(e.error);window.dispatchEvent(new CustomEvent("gamesUserCredentialChanged",{detail:e}))}).catch(function(e){console.error("Failed to authenticate user",e)}):ir(e)?ar(e):window.location.assign(e),0}var Zn,Qn,er,tr,nr,rr="https://www.nytimes.com/subscription/games",or=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;if(!t||!t.navigationLinks||!t.navigationLinks.subscribe)return rr;t=t.navigationLinks.subscribe;return e&&t[e]?t[e]:rr},ir=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return 0===e.indexOf("nytimes://")||0===e.indexOf("nytxwd://")},ar=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;if(!e)return null;t=t.createElement("a");t.href=e,t.click()},cr=(Zn=[{name:"loading",Content:function(e){var t=e.hasLoaded,t=Xn(Xn(Xn({},Yn(e,Hn)),{bgColor:"$letter-boxed-pink",barBgColor:"rgba(255, 255, 255, 0.6)",barColor:"black",transitionTo:"welcome"}),{},{hasLoaded:t});return d.createElement(Fn,t)}},{name:"welcome",Content:function(e){function t(){ut.interaction.custom({module:{element:{name:"letter-boxed",label:"subscribe"}}},!0)}var n=e.puzzle,r="reg"===l.userType.entitlement||"anon"===l.userType.entitlement,o=ft(n.printDate),e=n.printDate.split("-"),e={icon:"letter-boxed",title:"Letter Boxed",date:"".concat({"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"}[e[1]]," ").concat(e[2],", ").concat(e[0]),bgColor:"$letter-boxed-pink",buttons:[{text:"Play",action:function(){l.mobileNavTools.activate(),sr.transition("welcome","game"),ut.interaction.gameplay("letter-boxed","start-game",n.par)}}],description:{text:"Create words using letters around the square."},meta:{plays:""},editor:n.editor,promo:"oxford"};return o&&r&&(e.meta.plays="0 plays left today",e.buttons[0].color="secondary",e.buttons[0].icon="locked",e.buttons[0].action=function(){ut.interaction.custom({module:{element:{name:"letter-boxed",label:"play-subscribe"}}})},e.buttons.push({text:"Subscribe",action:function(){Kn("letterBoxedCard"),t()}})),!o&&r&&(e.buttons.push({text:"Subscribe",color:"secondary",action:function(){Kn("letterBoxedCard"),t()}}),e.meta.plays="1 play left today"),d.createElement(Jn,{game:e})}}],Qn=document.getElementById("portal-game-moments"),er=[].concat(Sn(Zn.map(function(e){return e.name})),["game"]),tr={sequencingClass:ln},(nr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(o,s.Component);var e,t,n,r=gn(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e)).state={currentMoment:""},tr.load=e.load.bind(wn(e)),tr.getCurrentMoment=e.getCurrentMoment.bind(wn(e)),tr.transition=e.momentTransition.bind(wn(e)),tr.reanimateMoment=function(t){re(un).then(function(){var e=document.getElementById("js-hook-pz-moment__".concat(t)).querySelector(".".concat(ln));e&&mn(Array.from(e.children),200)})}.bind(wn(e)),e}return e=o,(t=[{key:"componentDidMount",value:function(){var e;(e=document.getElementById("js-hook-pz-moment__game"))&&fn(e,"pz-moment__frame")}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.currentMoment,r=this.props.onEnter;t.currentMoment!==n&&r(n)}},{key:"getCurrentMoment",value:function(){return this.state.currentMoment}},{key:"momentTransition",value:function(e,t){var n=this;if(er.includes(e)&&er.includes(t))return function(t,n,e){var r=document.getElementById("js-hook-game-wrapper"),o=t.offsetHeight,i=document.querySelector(".".concat(cn)),a=document.querySelectorAll(".".concat(an));sn(r,Jt,t.style.backgroundColor||"white"),sn(r,Gt,en),sn(r,Xt,Kt),sn(r,Vt,"".concat(o,"px")),sn(n,Yt,Kt),sn(n,Gt,tn),sn(n,Ht,0),fn(n,nn),sn(t,Gt,tn),sn(t,Ht,0),fn(t,on),e&&e();var c=n.offsetHeight;return window.isHybridWebView&&sn(document.body,Jt,t.style.backgroundColor||"white"),re(un).then(function(){a.length&&dn(a,an),sn(n,Yt,Qt),fn(n,rn);var e=n.querySelector(".".concat(ln));e&&mn(Array.from(e.children).concat(i),25),pn(r,Vt,o,c,un).then(function(){dn(t,nn),dn(t,on),dn(n,rn),sn(r,Gt,Zt),sn(r,Xt,Qt),sn(r,Vt,0),sn(t,Gt,Zt),sn(n,Gt,Zt)})}),new Promise(function(e){return setTimeout(e,un)})}(lr(e),lr(t),function(){return n.setState({currentMoment:t})});console.error("".concat(e," or ").concat(t," is not a registered moment"))}},{key:"load",value:function(e){var t;er.includes(e)?(t=lr(e),fn(t,nn),this.setState({currentMoment:e})):console.error("".concat(e," is not a registered moment"))}},{key:"render",value:function(){var n=this.state.currentMoment,r=this.props.contentProps;return i.createPortal(d.createElement(d.Fragment,null,Zn.map(function(e){var t=e.name,e=e.Content;return d.createElement("section",{className:"pz-moment__frame pz-moment__".concat(t),key:t,id:"js-hook-pz-moment__".concat(t)},d.createElement(e,bn({momentSystem:tr,isActive:n===t},r)))})),Qn)}}])&&vn(e.prototype,t),n&&vn(e,n),o}()).defaultProps={onEnter:function(){},contentProps:{}},{Moments:nr,momentSystem:tr});function lr(e){return document.getElementById("js-hook-pz-moment__".concat(e))}var ur=cr.Moments,sr=cr.momentSystem;function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function pr(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?dr(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):dr(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function br(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=vr(n);return function(e,t){{if(t&&("object"===fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=vr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var hr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(o,d.PureComponent);var e,t,n,r=br(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,(t=[{key:"componentDidMount",value:function(){this.props.isSharedMomentsFeatureFlagOn&&sr.load("loading")}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.puzzle,t=t.modalSystem;n.isCompleted&&!1===e.puzzle.isCompleted&&(ut.interaction.gameplay("solve-game",n.submittedWords.length),l.userType.hasXwd?t.open("congrats","congrats"):(function(e){if(void 0===mt.localStorage)return;try{mt.localStorage.setItem(yt,JSON.stringify({printDate:e}))}catch(e){console.error("local storage failure:",e)}}(n.printDate),t.open("congratsSubscribe","congratsSubscribe")))}},{key:"render",value:function(){var e=this.props,t=e.puzzle,n=e.actions,r=e.modalSystem,o=e.isSharedMomentsFeatureFlagOn,i=e.hasLoaded,e=t.animating;return d.createElement("div",{className:"lb-content-box"},o&&d.createElement(ur,{contentProps:{puzzle:t,hasLoaded:i}}),d.createElement(pt,{modals:r,actions:n,animating:e,printDate:t.printDate}),d.createElement(ne,{modalSystem:r,data:pr({},t),actions:n}),d.createElement("div",{className:"lb-game-container"},d.createElement("div",{className:"lb-word-container"},d.createElement(Ft,{value:t.activeWord,action:n.handleTextChange}),t.message.isError&&d.createElement(qt,{message:t.message}),0<t.submittedWords.length&&d.createElement(Nt,this.props),d.createElement("div",{className:"lb-par"},"Try to solve in ",t.par," ",1<t.par?"words":"word")),d.createElement("div",{className:"lb-square-container"},!1===t.message.isError&&d.createElement(qt,{message:t.message}),d.createElement(at,this.props),d.createElement("div",{className:"lb-button-container"},d.createElement("button",{type:"button",className:"lb-button",onClick:n.removeLetter},"Delete"),d.createElement("button",{type:"button",className:"lb-button",onClick:n.submitWord},"Enter")))))}}])&&mr(e.prototype,t),n&&mr(e,n),o}();function gr(e){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wr(e){return function(e){if(Array.isArray(e))return Or(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Or(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sr(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Er(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sr(Object(n),!0).forEach(function(e){Cr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pr(e,t){return(Pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _r(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=xr(n);return function(e,t){{if(t&&("object"===gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return kr(e)}(this,r?(e=xr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xr(e){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}hr.defaultProps={puzzle:{},actions:{},hasLoaded:!1};var zr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pr(e,t)}(o,d.PureComponent);var e,t,n,r=_r(o);function o(e){var t,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Cr(kr(c=r.call(this,e)),"getCtx",function(){return c.canvas.current.getContext("2d")}),Cr(kr(c),"setScale",function(e){var t=c.getCtx();t.save(),t.scale(window.devicePixelRatio,window.devicePixelRatio),e(),t.restore()}),Cr(kr(c),"drawPuzzle",function(){c.calculateCoordinates(),c.setScale(function(){var e=c.props.config;c.drawSquare(),c.drawLines(),e.outlineColor&&c.drawSquareOutline(),e.pointStyle&&c.drawPoints(),e.letterStyle&&c.drawLetters()})}),Cr(kr(c),"clearPuzzle",function(){c.getCtx().clearRect(0,0,c.canvas.current.width,c.canvas.current.height)}),Cr(kr(c),"calculateCoordinates",function(){var e=c.props.config,t=xe(ve.letter,c.squareInfo,e),e=xe(ve.point,c.squareInfo,e);c.updateLetterState(ve.letter,t),c.updateLetterState(ve.point,e)}),Cr(kr(c),"drawSquare",function(){var e=c.props.config,t=c.squareInfo,n=t.startingX,r=t.startingY,o=t.squareSize,t=c.getCtx();t.fillStyle=e.squareColor,t.fillRect(n,r,o,o)}),Cr(kr(c),"updateLetterState",function(n,r){var e=c.letters.map(function(e,t){return Er(Er({},e),{},Cr({},"".concat(n,"Coords"),r[t]))});c.letters=e}),Cr(kr(c),"drawLines",function(){var e=c.props.solution,e=Ne(e,c.letters);e&&e.map(function(e){return c.drawLine(e,he.isSubmitted)})}),Cr(kr(c),"drawLine",function(e){var t=e.from,n=e.to,r=c.props.config,o=r.canvasSize,i=r.lineWidth,a=r.lineStyle,e=a.color,r=a.isDashed,a=a.lineCap,i=i-1,r=r?Te(o):[],o=c.getCtx();o.save(),o.strokeStyle=e,o.fillStyle=e,o.lineWidth=i,o.lineCap=a,o.setLineDash(r),o.beginPath(),o.moveTo(t.x,t.y),o.lineTo(n.x,n.y),o.stroke(),o.restore()}),Cr(kr(c),"drawSquareOutline",function(){var e=c.props.config,t=c.squareInfo,n=t.startingX,r=t.startingY,o=t.squareSize,t=c.getCtx();t.strokeStyle=e.outlineColor,t.lineWidth=e.lineWidth-1,t.strokeRect(n,r,o,o)}),Cr(kr(c),"drawPoint",function(e){var t=c.props.config,n=t.dotRadius,r=t.lineWidth,o=t.pointStyle,t=c.getCtx();t.lineWidth=r-1,t.strokeStyle=o.strokeStyle,t.fillStyle=o.fillStyle,t.beginPath(),t.arc(e.x,e.y,n,0,2*Math.PI,!1),t.fill(),t.stroke()}),Cr(kr(c),"drawPoints",function(){c.letters.forEach(function(e){e=e.pointCoords;return c.drawPoint(e)})}),Cr(kr(c),"drawLetter",function(e,t){var n=c.props.config,r=n.fontSize,o=n.letterStyle,n=c.getCtx();n.textAlign="center",n.font="".concat(o.fontWeight," ").concat(r,"px nyt-franklin"),n.strokeStyle=o.strokeStyle,n.fillStyle=o.fillStyle,n.fillText(e,t.x,t.y)}),Cr(kr(c),"drawLetters",function(){c.letters.forEach(function(e){var t=e.letter,e=e.letterCoords;return c.drawLetter(t,e)})});var n=c.props.config;return c.canvas=d.createRef(),c.letters=(t=[]).concat.apply(t,wr(e.sides.map(function(e){return e.split("").map(function(e){return{letter:e}})}))),c.squareInfo=Re(n.canvasSize,n.squarePercentage),c}return e=o,(t=[{key:"componentDidMount",value:function(){var e=this;new a("nyt-franklin").load().then(function(){return e.drawPuzzle()})}},{key:"componentDidUpdate",value:function(){this.clearPuzzle(),this.drawPuzzle()}},{key:"render",value:function(){var e=this.props.config.canvasSize;return d.createElement("canvas",{ref:this.canvas,width:e*window.devicePixelRatio,height:e*window.devicePixelRatio,style:{width:e,height:e}})}}])&&jr(e.prototype,t),n&&jr(e,n),o}();zr.defaultProps={config:o.shape({squareColor:be.white,outlineColor:null,pointStyle:null,letterStyle:null,lineStyle:{isDashed:!1,color:be.pink,lineCap:"round"},canvasSize:200,squarePercentage:.9,dotRadius:2,fontSize:12,lineWidth:5})};function Lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ar(){return d.createElement(d.Fragment,null,d.createElement("h3",{className:"lb-modal__title"},"How to Play"),d.createElement("p",{className:"lb-modal__sub-heading"},"Create words using letters",d.createElement("br",null),"round the square"),d.createElement("div",{className:"lb-modal__preview-square"},d.createElement(zr,{solution:Br,sides:Mr,config:Wr})),d.createElement("div",{className:"lb-modal__content"},d.createElement("ul",{className:"lb-modal__list"},d.createElement("li",null,"Connect letters to spell words"),d.createElement("li",null,"Words must be at least 3 letters long"),d.createElement("li",null,"Letters can be reused"),d.createElement("li",null,"Consecutive letters cannot be from the same side"),d.createElement("li",null,"The last letter of a word becomes the first letter of the next word",d.createElement("br",null),"e.g. THY > YES > SINCE"),d.createElement("li",null,"Words cannot be proper nouns or hyphenated"),d.createElement("li",null,"No cussing either, sorry"),d.createElement("li",null,"Use all letters to solve!")),d.createElement("p",{className:"lb-modal__more-info"},"New puzzles are released daily at 3 a.m. ET."),d.createElement("p",{className:"lb-modal__more-info"},"Have feedback? Email us at",d.createElement("br",null),d.createElement(Dr,{subject:"Letter Boxed Feedback"},"nytgames@nytimes.com"),".")))}var Dr=function(e){var t=e.subject,n=void 0===t?"":t,r=e.href,o=void 0===r?"":r,t=e.children,r=void 0===t?"":t,t=e.type,i=void 0===t?"feedback":t,t=e.user,a=void 0===t?{}:t,e=Lr(s.useState("mailto:nytgames@nytimes.com"),2),t=e[0],c=e[1];s.useEffect(function(){l.getFeedbackLink(n).then(c)},[]);e=o&&n?n:"",t=o?"".concat(o,"?subject=").concat(e):t;return d.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t,onClick:function(e){window.isHybridWebView&&window.NativeBridge&&(e.preventDefault(),window.NativeBridge.gamesSendEmail({type:i,debugInfo:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document.documentElement,n=Object.entries(window.abra.tests).map(function(e){return e.join("=")}).join(",");return["Hybrid summary:","Platform: ".concat(window.newsreaderAppPlatform?"News App":"XW App"),"Viewport Size: ".concat(t.clientWidth," x ").concat(t.clientHeight),"Logged In: ".concat(e.isLoggedIn?"Yes":"No"),"Xwd: ".concat(e.hasXwd?"Yes":"No"),"Regi: ".concat(e.regiId),"NYTS: ".concat(e.nytsCookie?"Yes":"No"),"Web Version: ".concat(window.env.version),"Flags: ".concat(n)].join("\n")}(a)}))}},r)},Rr={squareColor:be.white,outlineColor:be.black,pointStyle:{strokeStyle:be.black,fillStyle:be.white},letterStyle:{strokeStyle:be.black,fillStyle:be.black,fontWeight:700},lineStyle:{isDashed:!1,color:be.pink,lineCap:"butt"},canvasSize:120,squarePercentage:.65,dotRadius:2,fontSize:12,lineWidth:3},Tr={squareColor:be.white,outlineColor:null,pointStyle:null,letterStyle:null,lineStyle:{isDashed:!1,color:be.pink,lineCap:"round"},canvasSize:200,squarePercentage:.9,dotRadius:2,fontSize:12,lineWidth:5},Wr={squareColor:be.white,outlineColor:be.black,pointStyle:{strokeStyle:be.black,fillStyle:be.white},letterStyle:{strokeStyle:be.black,fillStyle:be.black,fontWeight:700},lineStyle:{isDashed:!0,color:be.pink,lineCap:"butt"},canvasSize:120,squarePercentage:.65,dotRadius:2,fontSize:12,lineWidth:3},Br=["WORDS"],Mr=["WMY","TOI","HND","SLR"],Ir=function(){var e=or("letterBoxedCard");return d.createElement("div",{className:"lb-modal__subscribeWelcome"},d.createElement("div",{className:"lb-modal__icon"}),d.createElement("h3",{className:"lb-modal__title"},"Welcome Back"),d.createElement("div",{className:"lb-modal__content"},d.createElement("div",{className:"lb-modal__limitHit"},"No plays left today"),d.createElement("div",{className:"lb-modal__description lb-modal__limitDescription"},"Subscribe to play again or come",d.createElement("br",null),"back tomorrow for more."),d.createElement("button",{type:"button",className:"pz-modal__button lb-button dark play",onClick:function(){ut.interaction.custom({module:{element:{name:"letter-boxed-welcome",label:"subscribe"}}},!0),window.location.href=e}},"Subscribe"),d.createElement("button",{type:"button",className:"pz-modal__button lb-button white more",onClick:function(){ut.interaction.custom({module:{element:{name:"letter-boxed-welcome",label:"more-puzzles"}}},!0),window.location.href="/crosswords"}},"More Puzzles")))};function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ur(e,t){return(Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Hr(n);return function(e,t){{if(t&&("object"===qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=Hr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Hr(e){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e){var e=(t=e.data).yesterdaysSolution,t=t.yesterdaysSides;return d.createElement(d.Fragment,null,d.createElement("h3",{className:"lb-modal__title"},"Our Solution to Yesterday’s Puzzle"),d.createElement("div",{className:"lb-modal__content"},d.createElement("div",{className:"lb-modal__wordlist"},e.map(function(e,t){return d.createElement("div",{className:"lb-word-list__word",key:"".concat(e,"-").concat(t)},e)})),d.createElement("div",{className:"lb-modal__square"},d.createElement(zr,{solution:e,sides:t,config:Rr}))))}var Xr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ur(e,t)}(o,d.PureComponent);var e,t,n,r=Fr(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return e=o,(t=[{key:"componentDidMount",value:function(){var t=this,e=new a("nyt-karnakcondensed"),n=new a("nyt-karnak");Promise.all([e.load(),n.load()]).then(function(){var e=t.props.modalSystem;t.showSubscribeModal()?e.open("subscribe","subscribe"):e.open("welcome","welcome")})}},{key:"showSubscribeModal",value:function(){var e=this.props.data.printDate;return vt(e)}},{key:"render",value:function(){if(this.showSubscribeModal())return Ir();var e,t=this.props,n=t.modalSystem,t=t.data.editor;return n={modalSystem:n,editor:t,isSub:l.userType.hasXwd},e=n.modalSystem,t=n.editor,n=n.isSub,d.createElement(d.Fragment,null,d.createElement("div",{className:"lb-modal__icon"}),d.createElement("h3",{className:"lb-modal__title"},"Letter Boxed"),d.createElement("div",{className:"lb-modal__content"},d.createElement("div",{className:"lb-modal__description"},"Create words using letters",d.createElement("br",null),"around the square."),d.createElement("div",{className:"pz-byline"},d.createElement("span",{className:"pz-byline__text"},"By"," ",t)),d.createElement("button",{type:"button",className:"pz-modal__button lb-button dark play",onClick:function(){l.mobileNavTools.activate(),e.close("welcome","welcome")}},"Play"),d.createElement("div",{className:"lb-button__wrapper"},d.createElement("button",{type:"button",className:"pz-modal__button lb-button white rules",onClick:function(){ut.interaction.settings("how-to-play"),e.open("help","welcome")}},"Rules"),d.createElement("button",{type:"button",className:"pz-modal__button lb-button white yesterday",onClick:function(){ut.interaction.settings("yesterday-solution"),e.open("yesterday","welcome")}},"Yesterday")),!n&&d.createElement("div",{className:"lb-modal__limitAlert"},"1 play left today"),d.createElement("a",{href:"https://www.oxforddictionaries.com",target:"_blank",rel:"noopener noreferrer",className:"lb-modal__promo"})))}}])&&$r(e.prototype,t),n&&$r(e,n),o}(),Yr=function(e){var t=e.data,n=t.submittedWords,r=t.par,o=t.sides,i=e.primaryButton,a=e.parDescription,c=e.subParDescription,t=e.warnPlayerOnLimit,e=n.length<=r?"Congratulations!":"Super solving!",c=n.length<=r?d.createElement("span",null,d.createElement("p",null,"You solved within ",r," ",1<r?"words":"word",".")," ",d.createElement("p",null,a)):d.createElement("span",null,c);return d.createElement(d.Fragment,null,d.createElement("div",{className:"lb-modal__square"},d.createElement(zr,{solution:n,sides:o,config:Tr})),d.createElement("h3",{className:"lb-modal__title"},e),t&&d.createElement("div",{className:"lb-modal__limitHit"},"No plays left today"),d.createElement("div",{className:"lb-modal__content"},d.createElement("div",{className:"lb-modal__description"},c),d.createElement("div",{className:"lb-button__wrapper"},d.createElement("button",{type:"button",className:"pz-modal__button lb-button restart dark",onClick:i.onClick},i.text),d.createElement("button",{type:"button",className:"pz-modal__button lb-button white more",onClick:function(){var e;ut.interaction.custom({module:{element:{name:"letter-boxed",label:"more-puzzles"}}},!0),window.isHybridWebView&&window.NativeBridge?window.NativeBridge.gamesBackToHub():window.isPlayTab?((e=document.createElement("a")).href="nytimes://play",e.click()):window.location.href="/crosswords"}},"View all games"))))};Yr.defaultProps={warnPlayerOnLimit:!1};function Vr(e){var t=e.data,n=e.actions,r=e.modalSystem,e="For an extra challenge, try to solve with ".concat(t.par," ").concat(1<t.par?"words":"word"," or less.");return d.createElement(Yr,{primaryButton:{onClick:function(){ut.interaction.gameplay("play-again",t.par),r.close("congrats"),n.resetGame()},text:"Play again"},data:t,parDescription:"Come back tomorrow for more.",subParDescription:e})}function Jr(e){var t=e.data,n="Subscribe for unlimited play.",e="Can you solve with ".concat(t.par," ").concat(1<t.par?"words":"word"," or less? ").concat(n);return d.createElement(Yr,{primaryButton:{onClick:function(){ut.interaction.custom({module:{element:{name:"letter-boxed-congrats",label:"subscribe"}}},!0),window.location.href=or("letterBoxedCard")},text:"Subscribe"},data:t,parDescription:n,subParDescription:e,warnPlayerOnLimit:!0})}function Kr(){return Ir()}function Zr(){return(Zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Qr(e){return{type:"LetterBoxed/LETTER_NOT_FOUND",payload:e}}function eo(o){return function(e,t){return n=t(),r=o,t=void 0!==n.puzzleContainer?n:{puzzleContainer:se({},n)},n=ae(t),t=ie(t).activeLetter,de(r)&&pe(n,r)&&!me(n,r,t)?e({type:w,payload:o}):e(Qr(o));var n,r}}function to(){return function(e,t){fe(ie(t()))||e({type:O})}}function no(){return{type:L}}function ro(e){return{type:C,payload:e}}function oo(e){return{type:z,payload:e}}function io(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(n,r){n((t?ro:oo)(e)),re(t?1200:800).then(function(){var e=r().puzzleContainer.message,t=e.value,e=e.isError;t&&e&&n(no())})}}function ao(){return function(e,t){var n,r=ie(t());fe(r)||((n=r.activeWord).length&&2<n.length?(n=(t=r).dictionary,t=r.activeWord,n.includes(t)?(r.message.value&&e(no()),e({type:E})):e(io("Not a word",!0))):e(io("Too short",!0)))}}function co(){return{type:P}}function lo(){return{type:j}}t=Object.freeze({__proto__:null,letterNotFound:Qr,addLetter:eo,removeLetter:to,clearErrorMessage:no,showErrorMessage:ro,showSuccessMessage:oo,showMessage:io,submitWord:ao,handleTextChange:function(n){return function(e,t){fe(ie(t()))||("BACKSPACE"===(t=n.key.toUpperCase())?(n.preventDefault(),e(to())):"ENTER"===t?(n.preventDefault(),e(ao())):e(eo(t)))}},completeGame:co,endAnimation:lo,addWord:function(){return function(e,t){e(lo()),e({type:S});var n,r,o=ie(t());t=(n=o).submittedWords,o=o.sides,t=(n=[]).concat.apply(n,ce(t.map(function(e){return e.split("")}))),r=ye(t),(t=[]).concat.apply(t,ce(o.map(function(e){return e.split("")}))).every(function(e){return r.includes(e)})&&e(co())}},resetGame:function(){return function(e,t){fe(ie(t()))||e({type:_})}},lockGame:function(){return{type:x}},unlockGame:function(){return{type:k}}});function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function so(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function fo(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?so(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):so(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mo(e,t){return(mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yo(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=bo(n);return function(e,t){{if(t&&("object"===uo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,r?(e=bo(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function bo(e){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}cr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mo(e,t)}(o,d.PureComponent);var e,t,n,r=yo(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e)).state={isSharedMomentsFeatureFlagOn:void 0,hasUserInfoLoaded:!0},e}return e=o,(t=[{key:"componentDidUpdate",value:function(e){var t,n,r,o=this.props.abra;0===Object.keys(e.abra.tests).length&&0<Object.keys(o.tests).length&&(t="1_On"===this.props.abra.getVariant("GAMES_sharedMoments_0122"),e=(r=this.props).lockGame,o=r.unlockGame,r=r.puzzle,e={onClose:o,onOpen:e},n=fo({},r),r=[{name:"help",meta:{Content:Ar},onClose:l.mobileNavTools.activate},{name:"congratsSubscribe",meta:{Content:Jr},closeByEx:!1,closeByBgClick:!1,onOpen:function(){ut.impression.custom({module:{name:"congrats-modal",region:"letter-boxed"}}),ut.impression.custom({module:{name:"hardpaywall",region:"letter-boxed-no-plays-congrats"}})}},{name:"yesterday",meta:{Content:Gr},onClose:l.mobileNavTools.activate},{name:"congrats",meta:{Content:Vr},closeByEx:!1,onOpen:function(){return ut.impression.custom({module:{name:"congrats-modal",region:"letter-boxed"}})}}],t||(r.push({name:"welcome",meta:{Content:Xr},closeByEx:!1,onClose:function(){return ut.interaction.gameplay("start-game",n.par)}}),r.push({name:"subscribe",meta:{Content:Kr},closeByEx:!1,closeByBgClick:!1,onOpen:function(){return ut.impression.custom({module:{name:"hardpaywall",region:"letter-boxed-no-plays-welcome"}})}})),this.modalSystem=function(e,t){t=K(K({},Z),{},{modals:e},t);return V(t)}(r,e),this.setState({isSharedMomentsFeatureFlagOn:t}))}},{key:"render",value:function(){var e=this.props.puzzle,t=this.state,n=t.isSharedMomentsFeatureFlagOn,t=t.hasUserInfoLoaded;return void 0!==n?d.createElement(hr,{actions:this.props,puzzle:fo({},e),modalSystem:this.modalSystem,isSharedMomentsFeatureFlagOn:n,hasLoaded:t}):null}}])&&po(e.prototype,t),n&&po(e,n),o}();cr.defaultProps={puzzle:{},abra:{}};o=fo({},t),t=n.compose(function(n){return function(e){var t=s.useContext(m);return d.createElement(n,Zr({abra:t},e))}},e.connect(function(e){return{puzzle:fo(fo({},ie(e)),{},{letters:ae(e)})}},o))(cr),o=document.getElementById("pz-game-root"),cr=function(e){e.date;var t=H(e,$),e=F(F({},q),t),t=[n.applyMiddleware(r)];return window.__REDUX_DEVTOOLS_EXTENSION__&&t.push(window.__REDUX_DEVTOOLS_EXTENSION__()),n.createStore(G,{puzzleContainer:e},n.compose.apply(void 0,t))}(l.getGameData());i.render(d.createElement(g,null,d.createElement(e.Provider,{store:cr},d.createElement(t,null))),o)});
//# sourceMappingURL=letter-boxed.1e71ba669a95430b01dcfd05e0946bdf1f7fcd81.js.map